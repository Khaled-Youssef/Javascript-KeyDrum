<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inter Active Key Drum</title>
    <link rel="shortcut icon" href="img/Joe.png" type="image">
    <link rel="stylesheet" href="css/style.css">

</head>
<body>
    <div class="container">
            <div class="drum">
                    <div class="key" data-key ="65">
                        <kbd>
                            A
                        </kbd>
                    </div>
                    <div class="key" data-key ="83">
                        <kbd>
                            S
                        </kbd>
                    </div>
                    <div class="key" data-key ="68">
                        <kbd>
                            D
                        </kbd>
                    </div>
                    <div class="key" data-key ="70">
                        <kbd>
                            F
                        </kbd>
                    </div>
                    <div class="key" data-key ="71">
                        <kbd>
                            G
                        </kbd>
                    </div>
                    <div class="key" data-key ="72">
                        <kbd>
                            H
                        </kbd>
                    </div>
                    <div class="key" data-key ="74">
                        <kbd>
                            J
                        </kbd>
                    </div>
                    <div class="key" data-key ="75">
                        <kbd>
                            K
                        </kbd>
                    </div>
            </div>

                <div class="copyrights">
                    Made by <a href="https://github.com/Khaled-Youssef/"><img src="img/joe-dl-logo-w.png" alt="Khaled Youssef" srcset=""></a>
                </div>
    </div>
    <audio src="./sounds/crash.wav" data-key="65"></audio>
    <audio src="./sounds/hihat_close.wav" data-key="83"></audio>
    <audio src="./sounds/hihat_open.wav" data-key="68"></audio>
    <audio src="./sounds/kick.wav" data-key="70"></audio>
    <audio src="./sounds/ride.wav" data-key="71"></audio>
    <audio src="./sounds/snare.wav" data-key="72"></audio>
    <audio src="./sounds/tom-mid.wav" data-key="74"></audio>
    <audio src="./sounds/tom-low.wav" data-key="75"></audio>


    <script>

        const availableKeys  = document.querySelectorAll(".key")
        availableKeys.forEach(key=>key.addEventListener('transitionend', removeActive))
        function removeActive(e){
                if (e.propertyName != "box-shadow" ) return
                this.classList.remove("played")
        }
        function playSound(e){
            e.preventDefault();
            const  audioELement  = document.querySelector('audio[data-key ="' + e.keyCode  +  '"]')
            const pressedKey =  document.querySelector('div[data-key ="' + e.keyCode  +  '"]')
            if(!audioELement) {return}
            if(!pressedKey) {return}
            pressedKey.classList.add("played")
            audioELement.currentTime = 0
            audioELement.play();
}
        window.addEventListener('keydown', playSound)

    </script>
</body>
</html>

